[
  {
    "objectID": "lab6.html",
    "href": "lab6.html",
    "title": "Lab6",
    "section": "",
    "text": "library(ggthemes)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──\n✔ broom        1.0.7     ✔ rsample      1.2.1\n✔ dials        1.3.0     ✔ tune         1.2.1\n✔ infer        1.0.7     ✔ workflows    1.1.4\n✔ modeldata    1.4.0     ✔ workflowsets 1.1.0\n✔ parsnip      1.2.1     ✔ yardstick    1.3.1\n✔ recipes      1.1.0     \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n• Use tidymodels_prefer() to resolve common conflicts.\n\nlibrary(powerjoin)\nlibrary(glue)\nlibrary(vip)\n\n\nAttaching package: 'vip'\n\nThe following object is masked from 'package:utils':\n\n    vi\n\nlibrary(baguette)\nroot  &lt;- 'https://gdex.ucar.edu/dataset/camels/file'\ndownload.file('https://gdex.ucar.edu/dataset/camels/file/camels_attributes_v2.0.pdf', \n              'data/camels_attributes_v2.0.pdf')\ntypes &lt;- c(\"clim\", \"geol\", \"soil\", \"topo\", \"vege\", \"hydro\")\nremote_files  &lt;- glue('{root}/camels_{types}.txt')\nlocal_files   &lt;- glue('data/camels_{types}.txt')\nwalk2(remote_files, local_files, download.file, quiet = TRUE)\ncamels &lt;- map(local_files, read_delim, show_col_types = FALSE)\ncamels &lt;- power_full_join(camels ,by = 'gauge_id')"
  },
  {
    "objectID": "lab6.html#according-to-the-pdf-zero_q_freq-represents-the-frequency-of-days-with-q-0-mmday-as-a-percentage-with-q-representing-discharge.",
    "href": "lab6.html#according-to-the-pdf-zero_q_freq-represents-the-frequency-of-days-with-q-0-mmday-as-a-percentage-with-q-representing-discharge.",
    "title": "Lab6",
    "section": "According to the PDF, zero_q_freq represents the “frequency of days with Q = 0 mm/day” as a percentage, with Q representing discharge.",
    "text": "According to the PDF, zero_q_freq represents the “frequency of days with Q = 0 mm/day” as a percentage, with Q representing discharge."
  },
  {
    "objectID": "lab6.html#i-would-move-forward-with-the-neural-network-model-since-it-is-ranked-highest-compared-to-the-other-three-models.-this-ranking-makes-sense-since-the-neural-network-model-exhibits-the-highest-rsq-r-squared-value-and-one-of-the-lowest-rmse-root-mean-square-error.",
    "href": "lab6.html#i-would-move-forward-with-the-neural-network-model-since-it-is-ranked-highest-compared-to-the-other-three-models.-this-ranking-makes-sense-since-the-neural-network-model-exhibits-the-highest-rsq-r-squared-value-and-one-of-the-lowest-rmse-root-mean-square-error.",
    "title": "Lab6",
    "section": "I would move forward with the neural network model since it is ranked highest compared to the other three models. This ranking makes sense since the neural network model exhibits the highest rsq (R-squared value) and one of the lowest rmse (root mean square error).",
    "text": "I would move forward with the neural network model since it is ranked highest compared to the other three models. This ranking makes sense since the neural network model exhibits the highest rsq (R-squared value) and one of the lowest rmse (root mean square error).\n\nboost_model &lt;- boost_tree() %&gt;%\n  set_engine(\"xgboost\") %&gt;%\n  set_mode(\"regression\")\nboost_wf &lt;- workflow() %&gt;%\n  add_recipe(rec) %&gt;%\n  add_model(boost_model) %&gt;%\n  fit(data = camels_train) \n\nboost_data &lt;- augment(boost_wf, new_data = camels_test)\ndim(boost_data)\n\n[1] 135  60\n\nmetrics(boost_data, truth = logQmean, estimate = .pred)\n\n# A tibble: 3 × 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 rmse    standard       0.631\n2 rsq     standard       0.702\n3 mae     standard       0.397\n\nggplot(boost_data, aes(x = logQmean, y = .pred, colour = aridity)) +\n  scale_color_viridis_c() +\n  geom_point() +\n  geom_abline() +\n  theme_linedraw()\n\n\n\n\n\n\n\nnn_model &lt;- bag_mlp() %&gt;%\n  set_engine(\"nnet\") %&gt;%\n  set_mode(\"regression\")\nnn_wf &lt;- workflow() %&gt;%\n  add_recipe(rec) %&gt;%\n  add_model(nn_model) %&gt;%\n  fit(data = camels_train) \n\nnn_data &lt;- augment(nn_wf, new_data = camels_test)\ndim(nn_data)\n\n[1] 135  61\n\nmetrics(nn_data, truth = logQmean, estimate = .pred)\n\n# A tibble: 3 × 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 rmse    standard       0.560\n2 rsq     standard       0.761\n3 mae     standard       0.349\n\nggplot(nn_data, aes(x = logQmean, y = .pred, colour = aridity)) +\n  scale_color_viridis_c() +\n  geom_point() +\n  geom_abline() +\n  theme_linedraw()\n\n\n\n\n\n\n\nwf &lt;- workflow_set(list(rec), list(lm_model, rf_model, boost_model, nn_model)) %&gt;%\n  workflow_map('fit_resamples', resamples = camels_cv) \nautoplot(wf)\n\n\n\n\n\n\n\nrank_results(wf, rank_metric = \"rsq\", select_best = TRUE)\n\n# A tibble: 8 × 9\n  wflow_id          .config .metric  mean std_err     n preprocessor model  rank\n  &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;\n1 recipe_bag_mlp    Prepro… rmse    0.543  0.0261    10 recipe       bag_…     1\n2 recipe_bag_mlp    Prepro… rsq     0.792  0.0224    10 recipe       bag_…     1\n3 recipe_rand_fore… Prepro… rmse    0.561  0.0249    10 recipe       rand…     2\n4 recipe_rand_fore… Prepro… rsq     0.773  0.0257    10 recipe       rand…     2\n5 recipe_linear_reg Prepro… rmse    0.569  0.0260    10 recipe       line…     3\n6 recipe_linear_reg Prepro… rsq     0.770  0.0223    10 recipe       line…     3\n7 recipe_boost_tree Prepro… rmse    0.600  0.0289    10 recipe       boos…     4\n8 recipe_boost_tree Prepro… rsq     0.745  0.0268    10 recipe       boos…     4"
  },
  {
    "objectID": "lab6.html#i-chose-the-below-formula-because-i-observed-a-strong-negative-correlation-between-low-precipitation-frequency-and-mean-discharge--.715-and-a-medium-strong-negative-correlation-between-high-precipitation-frequency-and-mean-discharge--.669.-i-found-these-to-be-some-of-the-strongest-predictor-variables-when-compared-with-mean-discharge.-further-i-chose-these-2-because-they-made-logical-sense-to-me.-a-negative-correlation-between-low-prec.-freq.-and-discharge-makes-sense-as-an-increased-frequency-of-low-rainfall-over-a-period-of-time-will-lead-to-decreased-streamflow-since-less-water-accumulates.-although-not-intially-intuitive-high-precipitation-frequency-will-result-in-decreased-discharge-as-this-large-amount-of-rainfall-will-lead-to-more-flashy-streams-decreasing-overall-baseflow-in-the-body-of-water-and-therefore-decreasing-total-discharge.",
    "href": "lab6.html#i-chose-the-below-formula-because-i-observed-a-strong-negative-correlation-between-low-precipitation-frequency-and-mean-discharge--.715-and-a-medium-strong-negative-correlation-between-high-precipitation-frequency-and-mean-discharge--.669.-i-found-these-to-be-some-of-the-strongest-predictor-variables-when-compared-with-mean-discharge.-further-i-chose-these-2-because-they-made-logical-sense-to-me.-a-negative-correlation-between-low-prec.-freq.-and-discharge-makes-sense-as-an-increased-frequency-of-low-rainfall-over-a-period-of-time-will-lead-to-decreased-streamflow-since-less-water-accumulates.-although-not-intially-intuitive-high-precipitation-frequency-will-result-in-decreased-discharge-as-this-large-amount-of-rainfall-will-lead-to-more-flashy-streams-decreasing-overall-baseflow-in-the-body-of-water-and-therefore-decreasing-total-discharge.",
    "title": "Lab6",
    "section": "I chose the below formula because I observed a strong negative correlation between low precipitation frequency and mean discharge (-.715), and a medium-strong negative correlation between high precipitation frequency and mean discharge (-.669). I found these to be some of the strongest predictor variables when compared with mean discharge. Further, I chose these 2 because they made logical sense to me. A negative correlation between low prec. freq. and discharge makes sense as an increased frequency of low rainfall over a period of time will lead to decreased streamflow since less water accumulates. Although not intially intuitive, high precipitation frequency will result in decreased discharge as this large amount of rainfall will lead to more flashy streams, decreasing overall baseflow in the body of water and therefore decreasing total discharge.",
    "text": "I chose the below formula because I observed a strong negative correlation between low precipitation frequency and mean discharge (-.715), and a medium-strong negative correlation between high precipitation frequency and mean discharge (-.669). I found these to be some of the strongest predictor variables when compared with mean discharge. Further, I chose these 2 because they made logical sense to me. A negative correlation between low prec. freq. and discharge makes sense as an increased frequency of low rainfall over a period of time will lead to decreased streamflow since less water accumulates. Although not intially intuitive, high precipitation frequency will result in decreased discharge as this large amount of rainfall will lead to more flashy streams, decreasing overall baseflow in the body of water and therefore decreasing total discharge.\n\n## My formula: logQmean ~ high_prec_freq + low_prec_freq, data = camels_train_new\n\nmy_rec &lt;- recipe(logQmean ~ high_prec_freq + low_prec_freq, data = camels_train_new) %&gt;%\n  step_log(all_predictors()) %&gt;%\n  step_interact(terms = ~ high_prec_freq:low_prec_freq) |&gt; \n  step_naomit(all_predictors(), all_outcomes())\n\ncamels |&gt; \n  select(low_prec_freq, high_prec_freq, q_mean) |&gt; \n  drop_na() |&gt; \n  cor()\n\n               low_prec_freq high_prec_freq     q_mean\nlow_prec_freq      1.0000000      0.8717630 -0.7145711\nhigh_prec_freq     0.8717630      1.0000000 -0.6687589\nq_mean            -0.7145711     -0.6687589  1.0000000\n\nggplot(camels, aes(x = high_prec_freq, y = low_prec_freq)) +\n  geom_point(aes(color = q_mean)) +\n  geom_smooth(method = \"lm\") +\n  scale_color_viridis_c(trans = \"log\") +\n  scale_x_log10() + \n  scale_y_log10() +\n  theme_linedraw() +\n  theme(legend.position = \"bottom\",\n        legend.key.width = unit(2.5, \"cm\"),\n        legend.key.height = unit(.5, \"cm\")) + \n  labs(title = \"High Precipitation Freq. vs Low Precipitation Freq. vs Runnoff\", \n       x = \"High Precipitation Frequency\", \n       y = \"Low Precipitation Frequency\",\n       color = \"Mean flow\") \n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "lab6.html#i-think-the-neural-network-model-is-best.-according-to-the-ranking-tibble-this-model-has-the-highest-r-squared-rsq-value-when-compared-to-the-other-models-indicating-that-this-model-does-the-best-at-explaning-the-variance-among-variables.-further-the-neural-network-model-has-the-lowest-root-mean-squared-error-indicating-the-lowest-average-error-between-predicted-and-actual-results.",
    "href": "lab6.html#i-think-the-neural-network-model-is-best.-according-to-the-ranking-tibble-this-model-has-the-highest-r-squared-rsq-value-when-compared-to-the-other-models-indicating-that-this-model-does-the-best-at-explaning-the-variance-among-variables.-further-the-neural-network-model-has-the-lowest-root-mean-squared-error-indicating-the-lowest-average-error-between-predicted-and-actual-results.",
    "title": "Lab6",
    "section": "I think the neural network model is best. According to the ranking tibble, this model has the highest R-squared (rsq) value when compared to the other models, indicating that this model does the best at explaning the variance among variables. Further, the neural network model has the lowest root mean squared error, indicating the lowest average error between predicted and actual results.",
    "text": "I think the neural network model is best. According to the ranking tibble, this model has the highest R-squared (rsq) value when compared to the other models, indicating that this model does the best at explaning the variance among variables. Further, the neural network model has the lowest root mean squared error, indicating the lowest average error between predicted and actual results.\n\nautoplot(my_wf)\n\n\n\n\n\n\n\nrank_results(my_wf, rank_metric = \"rsq\", select_best = TRUE)\n\n# A tibble: 6 × 9\n  wflow_id          .config .metric  mean std_err     n preprocessor model  rank\n  &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;\n1 recipe_bag_mlp    Prepro… rmse    0.695  0.0247    10 recipe       bag_…     1\n2 recipe_bag_mlp    Prepro… rsq     0.657  0.0250    10 recipe       bag_…     1\n3 recipe_rand_fore… Prepro… rmse    0.718  0.0291    10 recipe       rand…     2\n4 recipe_rand_fore… Prepro… rsq     0.635  0.0314    10 recipe       rand…     2\n5 recipe_linear_reg Prepro… rmse    0.754  0.0239    10 recipe       line…     3\n6 recipe_linear_reg Prepro… rsq     0.600  0.0165    10 recipe       line…     3"
  },
  {
    "objectID": "lab6.html#the-plot-shows-a-relatively-strong-positive-correlation-between-actual-logqmean-and-predicted-.pred-values-of-mean-daily-discharge-according-to-my-model-with-the-black-diagnol-line-indicating-what-a-perfect-fit-would-look-like.-since-the-dots-are-mostly-clustered-around-this-line-i-would-say-that-this-model-performed-well-showing-the-ability-to-predict-outcomes-well.-since-the-points-fit-the-diagnol-line-better-towards-the-higher-values-of-logqmean-the-model-most-likely-predicts-better-when-the-mean-discharge-is-higher.-overall-i-would-consider-this-model-a-viable-option-for-analyzing-my-predictor-and-response-variables.",
    "href": "lab6.html#the-plot-shows-a-relatively-strong-positive-correlation-between-actual-logqmean-and-predicted-.pred-values-of-mean-daily-discharge-according-to-my-model-with-the-black-diagnol-line-indicating-what-a-perfect-fit-would-look-like.-since-the-dots-are-mostly-clustered-around-this-line-i-would-say-that-this-model-performed-well-showing-the-ability-to-predict-outcomes-well.-since-the-points-fit-the-diagnol-line-better-towards-the-higher-values-of-logqmean-the-model-most-likely-predicts-better-when-the-mean-discharge-is-higher.-overall-i-would-consider-this-model-a-viable-option-for-analyzing-my-predictor-and-response-variables.",
    "title": "Lab6",
    "section": "The plot shows a relatively strong, positive correlation between actual (logQmean) and predicted (.pred) values of mean daily discharge according to my model, with the black diagnol line indicating what a perfect fit would look like. Since the dots are mostly clustered around this line, I would say that this model performed well, showing the ability to predict outcomes well. Since, the points fit the diagnol line better towards the higher values of logQmean, the model most likely predicts better when the mean discharge is higher. Overall, I would consider this model a viable option for analyzing my predictor and response variables.",
    "text": "The plot shows a relatively strong, positive correlation between actual (logQmean) and predicted (.pred) values of mean daily discharge according to my model, with the black diagnol line indicating what a perfect fit would look like. Since the dots are mostly clustered around this line, I would say that this model performed well, showing the ability to predict outcomes well. Since, the points fit the diagnol line better towards the higher values of logQmean, the model most likely predicts better when the mean discharge is higher. Overall, I would consider this model a viable option for analyzing my predictor and response variables.\n\nnn_wf_new &lt;- workflow() %&gt;%\n  add_recipe(my_rec) %&gt;%\n  add_model(nn_model_new) %&gt;%\n  fit(data = camels_train_new) \n\nnn_data_new &lt;- augment(nn_wf_new, new_data = camels_test_new)\ndim(nn_data_new)\n\n[1] 135  61\n\nmetrics(nn_data_new, truth = logQmean, estimate = .pred)\n\n# A tibble: 3 × 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 rmse    standard       0.610\n2 rsq     standard       0.714\n3 mae     standard       0.430\n\nggplot(nn_data_new, aes(x = logQmean, y = .pred, colour = high_prec_freq)) +\n  scale_color_gradient() +\n  geom_point() +\n  geom_abline() +\n  theme_linedraw()"
  }
]